<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Memorice Comunidad Mills_RP</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #111;
      color: #fff;
      text-align: center;
      padding: 20px;
      background-image: url('fotos/fondob.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }

    .setup {
      margin-bottom: 20px;
    }

    input, select, button {
      padding: 8px;
      margin: 5px;
      font-size: 1em;
    }

    .game-board {
      display: grid;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }

    .card {
      width: 140px;
      height: 140px;
      perspective: 1000px;
      cursor: pointer;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }

    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 8px;
      overflow: hidden;
    }

    .card-front {
      background-color: #333;
    }

    .card-back {
      transform: rotateY(180deg);
    }

    .card-back img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .matched .card-inner {
      box-shadow: 0 0 10px #00ffcc;
    }

    #score {
      margin-top: 20px;
      font-size: 1.2em;
    }
  </style>
</head>
<body>
  <h1>ðŸ§  Memorice con CategorÃ­as</h1>

  <div class="setup">
    <input type="text" id="playerName" placeholder="Tu nombre">
    <select id="difficulty">
      <option value="bajo">Bajo</option>
      <option value="medio">Medio</option>
      <option value="alto">Alto</option>
    </select>
    <select id="category">
      <option value="General">General</option>
      <option value="RevyTormenta">RevyTormenta</option>
      <option value="emotes">Comunidad</option>
    </select>
    <button onclick="startGame()">Comenzar</button>
  </div>

  <div class="game-board" id="gameBoard"></div>
  <div id="score"></div>

  <script>
    const categories = {
      General: [
        'fotos/yoli1.png', 'fotos/tarqui.png', 'fotos/azen1.png',
        'fotos/mills1.png', 'fotos/blanca.png', 'fotos/gonza.png', 'fotos/mauri1.png' , 'fotos/padrino.png'
      ],
      RevyTormenta: [
        'fotos/CatRevy1.png', 'fotos/CatRevy2.jpg', 'fotos/CatRevy3.png', 'fotos/CatRevy4.png',
        'fotos/CatRevy5.png', 'fotos/CatRevy6.jpg', 'fotos/CatRevy7.png', 'fotos/CatRevy8.png',
        'fotos/CatRevy9.png', 'fotos/CatRevy10.png', 'fotos/CatRevy11.png', 'fotos/CatRevy12.png'
      ],
      emotes: [
        'fotos/Mills_Rosa.png', 'fotos/Mills_Risas.png', 'fotos/Mills_O7.png', 'fotos/Mills_Lloros.png',
        'fotos/Mills_Drama.png', 'fotos/Mills_Confusa.png', 'fotos/Mills_Beso.png', 'fotos/Mills_Monster.png',
        'fotos/Mills_Notas.png'
      ]
    };

    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    let matchedCount = 0;
    let startTime = null;
    let timerStarted = false;
    let totalPairs = 0;

    function startGame() {
      const name = document.getElementById('playerName').value.trim();
      const difficulty = document.getElementById('difficulty').value;
      const category = document.getElementById('category').value;
      const gameBoard = document.getElementById('gameBoard');
      const scoreDisplay = document.getElementById('score');

      if (!name) {
        alert("Por favor ingresa tu nombre.");
        return;
      }

      const allImages = categories[category];
      totalPairs = difficulty === 'bajo' ? 4 : difficulty === 'medio' ? 8 : 12;
      const selectedImages = allImages.slice(0, totalPairs);
      const images = [...selectedImages, ...selectedImages].sort(() => 0.5 - Math.random());

      gameBoard.innerHTML = '';
      scoreDisplay.textContent = '';
      [firstCard, secondCard] = [null, null];
      lockBoard = false;
      matchedCount = 0;
      startTime = null;
      timerStarted = false;

      const columns = difficulty === 'bajo' ? 4 : difficulty === 'medio' ? 4 : 6;
      gameBoard.style.gridTemplateColumns = `repeat(${columns}, 140px)`;

      images.forEach(src => {
        const card = document.createElement('div');
        card.classList.add('card');

        card.innerHTML = `
          <div class="card-inner">
            <div class="card-front"></div>
            <div class="card-back"><img src="${src}" alt="foto"></div>
          </div>
        `;

        card.addEventListener('click', () => {
          if (!timerStarted) {
            startTime = Date.now();
            timerStarted = true;
          }

          if (lockBoard || card.classList.contains('matched') || card === firstCard) return;

          card.classList.add('flipped');

          if (!firstCard) {
            firstCard = card;
          } else {
            secondCard = card;
            lockBoard = true;

            const img1 = firstCard.querySelector('img').src;
            const img2 = secondCard.querySelector('img').src;

            if (img1 === img2) {
              firstCard.classList.add('matched');
              secondCard.classList.add('matched');
              matchedCount += 2;
              resetTurn();

              if (matchedCount === images.length) {
                const totalTime = (Date.now() - startTime) / 1000;
                const difficultyFactor = difficulty === 'bajo' ? 1 : difficulty === 'medio' ? 1.5 : 2;
                const points = Math.max(1000 - Math.floor(totalTime * 10 * difficultyFactor), 0);
                scoreDisplay.textContent = `Â¡${name}, completaste el juego en ${totalTime.toFixed(1)} segundos!`;
              }
            } else {
              setTimeout(() => {
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                resetTurn();
              }, 1000);
            }
          }
        });

        gameBoard.appendChild(card);
      });
    }

    function resetTurn() {
      [firstCard, secondCard] = [null, null];
      lockBoard = false;
    }
  </script>
</body>
</html>


